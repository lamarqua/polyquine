#|
use strict;
my $middle_code = "737562206465636f6465207b0a096d79202824737472696e675f746f5f6465636f646529203d20405f3b0a096d7920406172726179203d202824737472696e675f746f5f6465636f6465203d7e206d2f2e2e2f67293b0a096d7920406465636f6465645f6172726179203d206d6170207b206368722868657828245f2929207d204061727261793b0a2020202072657475726e206a6f696e2827272c20406465636f6465645f6172726179293b0a7d0a0a7072696e74662022257325732573222c2022235c7c5c6e757365207374726963743b5c6e6d79205c246d6964646c655f636f6465203d205c22222c20246d6964646c655f636f64652c20225c223b5c6e5c6e223b0a7072696e746620222573222c206465636f646528246d6964646c655f636f6465293b0a7072696e746620222573222c202228646566696e65206d6964646c655f636f6465205c22246d6964646c655f636f64655c22295c6e223b0a7072696e74662022257325732573222c202228646973706c6179205c22235c7c5c5c6e757365207374726963743b5c5c6e5c22295c6e287072696e7466205c226d7920222c2027246d6964646c655f636f6465272c2022203d207e733b5c5c6e5c5c6e5c22206d6964646c655f636f6465295c6e28646973706c617920286865782d737472696e672d3e6279746573206d6964646c655f636f646529295c6e287072696e7466205c2228646566696e65206d6964646c655f636f6465207e73295c22206d6964646c655f636f6465295c6e28646973706c6179206c6173746c696e6529220a0a0a5f5f454e445f5f0a7c230a236c616e67207261636b65740a28726571756972652066696c652f73686131290a28646566696e65206c6173746c696e6520225c6e28646973706c6179205c22237c5c5c6e757365207374726963743b5c5c6e5c22295c6e287072696e7466205c226d7920246d6964646c655f636f6465203d207e733b5c5c6e5c5c6e5c22206d6964646c655f636f6465295c6e28646973706c617920286865782d737472696e672d3e6279746573206d6964646c655f636f646529295c6e287072696e7466205c2228646566696e65206d6964646c655f636f6465207e73295c22206d6964646c655f636f6465295c6e28646973706c6179206c6173746c696e65295c6e22290a";

sub decode {
	my ($string_to_decode) = @_;
	my @array = ($string_to_decode =~ m/../g);
	my @decoded_array = map { chr(hex($_)) } @array;
    return join('', @decoded_array);
}

printf "%s%s%s", "#\|\nuse strict;\nmy \$middle_code = \"", $middle_code, "\";\n\n";
printf "%s", decode($middle_code);
printf "%s", "(define middle_code \"$middle_code\")\n";
printf "%s%s%s", "(display \"#\|\\nuse strict;\\n\")\n(printf \"my ", '$middle_code', " = ~s;\\n\\n\" middle_code)\n(display (hex-string->bytes middle_code))\n(printf \"(define middle_code ~s)\" middle_code)\n(display lastline)"


__END__
|#
#lang racket
(require file/sha1)
(define lastline "\n(display \"#|\\nuse strict;\\n\")\n(printf \"my $middle_code = ~s;\\n\\n\" middle_code)\n(display (hex-string->bytes middle_code))\n(printf \"(define middle_code ~s)\" middle_code)\n(display lastline)\n")
(define middle_code "737562206465636f6465207b0a096d79202824737472696e675f746f5f6465636f646529203d20405f3b0a096d7920406172726179203d202824737472696e675f746f5f6465636f6465203d7e206d2f2e2e2f67293b0a096d7920406465636f6465645f6172726179203d206d6170207b206368722868657828245f2929207d204061727261793b0a2020202072657475726e206a6f696e2827272c20406465636f6465645f6172726179293b0a7d0a0a7072696e74662022257325732573222c2022235c7c5c6e757365207374726963743b5c6e6d79205c246d6964646c655f636f6465203d205c22222c20246d6964646c655f636f64652c20225c223b5c6e5c6e223b0a7072696e746620222573222c206465636f646528246d6964646c655f636f6465293b0a7072696e746620222573222c202228646566696e65206d6964646c655f636f6465205c22246d6964646c655f636f64655c22295c6e223b0a7072696e74662022257325732573222c202228646973706c6179205c22235c7c5c5c6e757365207374726963743b5c5c6e5c22295c6e287072696e7466205c226d7920222c2027246d6964646c655f636f6465272c2022203d207e733b5c5c6e5c5c6e5c22206d6964646c655f636f6465295c6e28646973706c617920286865782d737472696e672d3e6279746573206d6964646c655f636f646529295c6e287072696e7466205c2228646566696e65206d6964646c655f636f6465207e73295c22206d6964646c655f636f6465295c6e28646973706c6179206c6173746c696e6529220a0a0a5f5f454e445f5f0a7c230a236c616e67207261636b65740a28726571756972652066696c652f73686131290a28646566696e65206c6173746c696e6520225c6e28646973706c6179205c22237c5c5c6e757365207374726963743b5c5c6e5c22295c6e287072696e7466205c226d7920246d6964646c655f636f6465203d207e733b5c5c6e5c5c6e5c22206d6964646c655f636f6465295c6e28646973706c617920286865782d737472696e672d3e6279746573206d6964646c655f636f646529295c6e287072696e7466205c2228646566696e65206d6964646c655f636f6465207e73295c22206d6964646c655f636f6465295c6e28646973706c6179206c6173746c696e65295c6e22290a")
(display "#|\nuse strict;\n")
(printf "my $middle_code = ~s;\n\n" middle_code)
(display (hex-string->bytes middle_code))
(printf "(define middle_code ~s)" middle_code)
(display lastline)
